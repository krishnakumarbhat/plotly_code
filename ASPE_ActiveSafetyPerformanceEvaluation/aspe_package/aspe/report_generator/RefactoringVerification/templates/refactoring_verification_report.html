<html>
<head>
    <meta charset="utf-8">
</head>
<body>

<header>
    <img src="{{ aptiv_logo_path }}" alt="" id="aptiv-logo">
    <h1>F360 Tracker Refactoring Verification Report</h1>
    {% if subtitle is not none %}
        <h2>{{ subtitle }}</h2>
    {% endif %}
</header>

<table class="table">
    <thead>
        <tr>
            <th></th>
            <th>Resim extension</th>
            <th>Commit ID</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="bold">Before</td>
            <td>{{ resim_extension_before }}</td>
            <td>{{ commit_id_before }}</td>
        </tr>
        <tr>
            <td class="bold">After</td>
            <td>{{ resim_extension_after }}</td>
            <td>{{ commit_id_after }}</td>
        </tr>
    </tbody>
</table>

<h2>Log paths</h2>
<ul id="log-list">
    {% for log_path in log_list %}
        <li>{{ log_path }}</li>
    {% endfor %}
</ul>

<h2>Results</h2>
<table class="table">
    <thead>
        <tr>
            <th>Log name</th>
            <th>Stream data equal</th>
        </tr>
    </thead>
    <tbody>
        {% for log_name, result in results.items() %}
            <tr>
                <td>{{ log_name }}</td>
                {% if result['equal'] %}
                    <td class="ok">OK</td>
                {% else %}
                    <td class="nok">NOK</td>
                {% endif %}
            </tr>
        {% endfor %}
    </tbody>
</table>

<h2>Detailed Results</h2>
{% for log_name, result in results.items() %}
    <div class="no-page-break">
        <h3>{{ log_name }}</h3>
        {% if result['equal'] %}
            <p>Data equal.</p>
        {% else %}
            <div class="inline-block">
                {{ result['log_features'].to_html(index=False, classes='table') | safe }}
            </div>
            <div class="inline-block">
                {{ result['kpis_binary_class'].to_html(index=False, classes='table') | safe }}
            </div>
        {% endif %}
    </div>
{% endfor %}

{% if comments is not none %}
    <div class="no-page-break">
        <h2>Comments</h2>
        <p>{{ comments }}</p>
    </div>
{% endif %}

<footer>
    Generated by {{ generated_by }} at {{ generated_at.strftime('%Y-%m-%d %H:%M:%S') }}
</footer>

</body>
</html>
